# Basic Configuration Example
# Send all logs matching "app.**" to a single TCP endpoint

<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

<match app.**>
  @type tcp_mc

  # Single server configuration
  <server>
    host 192.168.1.100
    port 5000
    name application-server
  </server>

  # Connection settings
  connect_timeout 5s
  send_timeout 60s

  # Buffer configuration
  <buffer tag>
    @type memory
    flush_interval 10s
    flush_mode interval
    retry_type exponential_backoff
    retry_wait 1s
    retry_max_interval 60s
    retry_timeout 1h
  </buffer>

  # Add timestamp and tag to each record
  <inject>
    time_key timestamp
    time_type string
    time_format %Y-%m-%dT%H:%M:%S.%NZ
    tag_key tag
  </inject>
</match>
